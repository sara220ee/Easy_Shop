<Window x:Class="EasyShopWindow.ProductsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Gestion des Articles" Height="450" Width="800">
    <Window.Background>
        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#F0F0F0" Offset="0"/>
            <GradientStop Color="#E5E5E5" Offset="0.3"/>
            <GradientStop Color="#DADADA" Offset="0.7"/>
            <GradientStop Color="#CFCFCF" Offset="1"/>
        </LinearGradientBrush>
    </Window.Background>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,10">
            <TextBlock Text="Filtrer par categorie :" VerticalAlignment="Center" Margin="0,0,10,0"/>
            <ComboBox x:Name="CategoryFilterComboBox" Width="200" DisplayMemberPath="NameCat"
                      SelectionChanged="CategoryFilterComboBox_SelectionChanged"/>
        </StackPanel>

   
        <DataGrid x:Name="ArticlesDataGrid" Grid.Row="1" AutoGenerateColumns="False" CanUserAddRows="True"
                  CanUserDeleteRows="False" IsReadOnly="False" AlternatingRowBackground="#F2F9FC"
                  RowBackground="White" HeadersVisibility="Column" BorderThickness="0" ColumnHeaderHeight="40"
                  RowHeight="40" FontSize="14" FontFamily="Segoe UI" SelectionMode="Single"
                  HorizontalGridLinesBrush="LightGray" VerticalGridLinesBrush="LightGray" Margin="10"
                  ItemsSource="{Binding Articles}" CellEditEnding="ArticlesDataGrid_CellEditEnding"
                  AddingNewItem="ArticlesDataGrid_AddingNewItem" RowEditEnding="ArticlesDataGrid_RowEditEnding">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding Id}" IsReadOnly="True" Width="Auto"/>
                <DataGridTextColumn Header="Nom" Binding="{Binding Name}" Width="*"/>
                <DataGridTextColumn Header="Prix" Binding="{Binding Price}" Width="Auto"/>
                <DataGridTextColumn Header="Quantite" Binding="{Binding Quantity}" Width="Auto">
                
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Quantity}" Value="0">
                                    <Setter Property="Foreground" Value="Red"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <DataGridTemplateColumn Header="Categorie" Width="*">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding CategoryProduct.NameCat}"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                    <DataGridTemplateColumn.CellEditingTemplate>
                        <DataTemplate>
                            <ComboBox ItemsSource="{Binding DataContext.Categories, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                      SelectedItem="{Binding CategoryProduct, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                      DisplayMemberPath="NameCat"
                      SelectionChanged="CategoryComboBox_SelectionChanged"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellEditingTemplate>
                </DataGridTemplateColumn>
                <DataGridTextColumn Header="Image" Binding="{Binding ImagePath}" Width="*"/>
            </DataGrid.Columns>
        </DataGrid>

        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,20,0">
            <Button Content="Retour" Click="ReturnButton_Click" Width="100" Height="35"
                    Background="#4CAF50" Foreground="White" FontWeight="Bold" Margin="0,10,20,0"/>
            <Button Content="Supprimer l'article selectionne" Click="Delete_Click" Width="200" Height="35"
                Background="#F44336" Foreground="White" FontWeight="Bold" Margin="0,10,0,0" HorizontalAlignment="Right"/>
        </StackPanel>
    </Grid>
</Window>